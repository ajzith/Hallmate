<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hallmate ‚Äî Login</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --accent: #ff6b35;
      --muted: #6b7280;
      --bg: #f8fafc;
    }
    body {
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg, #ffffff 0%, #f3f7fb 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    .card-login {
      max-width: 920px;
      width: 100%;
      border: none;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(16,24,40,0.08);
      overflow: hidden;
    }
    .left-panel {
      background: linear-gradient(180deg, rgba(255,107,53,0.10), rgba(255,107,53,0.03));
      padding: 2.5rem;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:1rem;
    }
    .brand-logo {
      width: 170px;
      height: auto;
      border-radius: 20px;
      background: white;
      padding: 6px;
      box-shadow: 0 6px 18px rgba(16,24,40,0.06);
      
    }
    h1 { font-size: 1.4rem; margin:0; }
    p.lead { margin:0; color:var(--muted); font-size:0.95rem; }
    .right-panel { padding:2.5rem; }
    .form-control:focus { box-shadow: none; border-color: var(--accent); }
    .btn-accent {
      background: var(--accent);
      color: white;
      font-weight: 600;
      border-radius: 10px;
      padding: 0.6rem 1.1rem;
    }
    .small-muted { color:var(--muted); font-size:0.88rem; }
    .spinner-border-sm { width: 1rem; height:1rem; border-width: .12rem; }
    @media (max-width: 768px) {
      .card-login { box-shadow: none; border-radius: 10px; }
      .left-panel { display:none; } /* hide left on small screens for simplicity */
    }
  </style>
</head>
<body>
  <div class="card card-login d-flex flex-row">
    <div class="left-panel col-md-5 d-none d-md-flex">
     <center> <img src="/Hallmate/assets/logo.png" alt="Hallmate Logo" class="brand-logo mb-3"> </center>
      <div> 
        <h1>Hallmate</h1>
        <p class="lead">Click. Check. Chill. ‚Äî Smart exam hall and seat allocation.</p>
      </div>
      <div class="mt-3 small-muted">
        <strong>Tip:</strong> Use your admin credentials to manage students, rooms and exams.
      </div>
    </div>

    <div class="right-panel col-md-7">
      <div class="row">
        <div class="col-12 text-end">
          <small class="small-muted">Not an admin? Use faculty/student portal.</small>
        </div>
      </div>
      <div class="mt-2">
        <h4 class="mb-1">Sign in to Hallmate</h4>
        <p class="small-muted mb-4">Manage exam schedules, seating, and invigilation.</p>

        <form id="loginForm" autocomplete="off">
          <div class="mb-3">
            <label class="form-label small-muted">Username</label>
            <input id="username" class="form-control form-control-lg" required>
          </div>

        <div class="mb-3">
          <label class="form-label small-muted">Password</label>
          <div class="input-group">
              <input id="password" type="password" class="form-control form-control-lg" required>
              <button class="btn btn-outline-secondary" type="button" id="togglePassword">üëÅ</button>
          </div>
        </div>


          <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
              <input id="remember" type="checkbox" />
              <label for="remember" class="small-muted ms-1">Remember me</label>
            </div>
            <div>
              <a href="#" class="small-muted">Forgot password?</a>
            </div>
          </div>

          <div class="d-grid">
            <button id="loginBtn" class="btn btn-accent" type="submit">
              <span id="btnText">Sign in</span>
              <span id="btnSpinner" class="spinner-border spinner-border-sm ms-2" role="status" aria-hidden="true" style="display:none"></span>
            </button>
          </div>

          <div id="message" class="mt-3 text-danger" style="display:none"></div>
        </form>

        <hr class="my-4">
        <div class="small-muted text-center">Build by Team Hallmate</div>
      </div>
    </div>
  </div>
  <script>
document.getElementById('togglePassword').addEventListener('click', () => {
  const pwd = document.getElementById('password');
  if (pwd.type === "password") {
    pwd.type = "text";
  } else {
    pwd.type = "password";
  }
});
</script>


  <!-- Bootstrap JS bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const form = document.getElementById('loginForm');
    const btn = document.getElementById('loginBtn');
    const spinner = document.getElementById('btnSpinner');
    const btnText = document.getElementById('btnText');
    const message = document.getElementById('message');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      message.style.display = 'none';
      btn.setAttribute('disabled', 'true');
      spinner.style.display = 'inline-block';
      btnText.textContent = 'Signing in...';

      const payload = {
        username: document.getElementById('username').value.trim(),
        password: document.getElementById('password').value
      };

      try {
        const resp = await fetch('/Hallmate/backend/login.php', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          credentials: 'same-origin',
          body: JSON.stringify(payload)
        });
        const data = await resp.json();
        if (resp.ok && data.success) {
          // redirect to admin dashboard (create below)
          window.location.href = '/Hallmate/frontend/admin_dashboard.php';
        } else {
          message.style.display = 'block';
          message.textContent = data.error || 'Login failed. Check credentials.';
        }
      } catch (err) {
        message.style.display = 'block';
        message.textContent = 'Network error. Is WAMP running?';
        console.error(err);
      } finally {
        btn.removeAttribute('disabled');
        spinner.style.display = 'none';
        btnText.textContent = 'Sign in';
      }
    });
  </script>
</body>
</html>
